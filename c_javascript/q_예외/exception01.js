// exception01.js

//& == ìë°”ìŠ¤í¬ë¦½íŠ¸ ì˜ˆì™¸ ==

//? cf) ì˜¤ë¥˜(Error, ì—ëŸ¬)
// : ë¶€ì •í™•í•˜ê±°ë‚˜ ìœ íš¨í•˜ì§€ ì•Šì€ ë™ì‘
// - ì‹œìŠ¤í…œ ìˆ˜ì¤€ì˜ ì‹¬ê°í•œ ë¬¸ì œ


//! 1. ì˜ˆì™¸(exception)ë€?
// : ëŸ°íƒ€ì„ ì¤‘ì—ì„œ ë°œìƒí•  ìˆ˜ ìˆëŠ” ì˜ˆì¸¡ ê°€ëŠ¥í•œ ìƒí™©ì— ëŒ€í•œ ë°˜ì‘
// - ë°œìƒí•˜ë”ë¼ë„ ì •ìƒì ì¸ ì‹¤í–‰ì„ ìš°ì§€í•  ìˆ˜ ìˆë„ë¡ ì²˜ë¦¬ ê°€ëŠ¥í•œ ì˜¤ë¥˜

//! 2. ì˜ˆì™¸ì˜ ì¢…ë¥˜
//? 1) êµ¬ë¬¸ ì˜¤ë¥˜
// : í”„ë¡œê·¸ë¨ ì‹¤í–‰ ì „ì— ë°œìƒ
// - ì½”ë“œ ì‘ì„± ì‹œ ë¬¸ë²•ì´ ì–¸ì–´ì—ì„œ ì •ì˜ëœ ê·œì¹™ì„ ë”°ë¥´ì§€ ì•Šì„ ë–„ ë°œìƒ

console.log('== êµ¬ë¬¸ ì˜¤ë¥˜ ì˜ˆì œ ==');
// console.log('ğŸ’»í”„ë¡œê·¸ë¨ì´ ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤.'; exception 
// if () { // Expression expected.

// }

//? 2) ëŸ°íƒ€ì„ ì˜¤ë¥˜
// : í”„ë¡œê·¸ë¨ ì‹¤í–‰ ì¤‘ ë°œìƒ (Node.js í™˜ê²½ OR ë¸Œë¼ìš°ì € í™˜ê²½)
// - ì˜ˆì¸¡ ê°€ëŠ¥í•œ ë¹„ì •ìƒì ì¸ ì¡°ê±´ ë˜ëŠ” ì˜ˆì™¸ì ì¸ ì‚¬ê±´ì„ ì˜ë¯¸
// - ì½”ë“œê°€ ìˆœì°¨ì ìœ¼ë¡œ ì‹¤í–‰ë˜ë‹¤ê°€ ì˜¤ë¥˜ ìœ„ì¹˜ì—ì„œ ì‹¤í–‰ ì¤‘ë‹¨

console.log('== ëŸ°íƒ€ì„ ì˜¤ë¥˜ ì˜ˆì œ ==');

// HTMLì— ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ìš”ì†Œë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ê²½ìš°
// : null ê°’ì´ ë°˜í™˜
const h1 = document.querySelector('h1');

// +) null ê°’ì„ ì—°ì‚°í•˜ê±°ë‚˜ null ê°’ì— ëŒ€í•œ ì ‘ê·¼ì„ í•˜ëŠ” ê²½ìš° ëŸ°íƒ€ì„ ì˜¤ë¥˜ ë°œìƒ
// h1.textContent = 'ì—†ëŠ” h1 íƒœê·¸ì— ë‚´ìš© ì¶”ê°€í•˜ê¸°!';
// >> TypeError: Cannot set properties of null

// console.rog('logë¥¼ rogë¡œ ì˜ëª» ì…ë ¥í•˜ì˜€ìŠµë‹ˆë‹¤.');
// >> ì˜¤íƒ€ ìˆ˜ì •ë§Œìœ¼ë¡œ í•´ê²° ê°€ëŠ¥í•œ ëŸ°íƒ€ì„ ì˜¤ë¥˜ë„ ë§ìŒ

// cf) JSì—ì„œëŠ” SyntaxErrorë¡œ ì¶œë ¥ë˜ëŠ” ì˜¤ë¥˜ ì´ì™¸ì˜ 
//    , ëª¨ë“  ì˜¤ë¥˜ê°€ ì˜ˆì™¸(ëŸ°íƒ€ì„ ì˜¤ë¥˜)ë¡œ ë¶„ë¥˜
// >> TypeError, ReferenceError, RangeError

//! ì˜ˆì™¸ ì²˜ë¦¬ ë°©ë²•

//? 1) ê¸°ë³¸ ì˜ˆì™¸ ì²˜ë¦¬: ì¡°ê±´ë¬¸ ì‚¬ìš© - ê¶Œì¥X
document.addEventListener('DOMContentLoaded', () => {
  const h1 = document.querySelector('h1');

  if (h1) {
    h1.textContent = 'ì•ˆë…•í•˜ì„¸ìš”.';
  } else {
    console.log('h1 íƒœê·¸ê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤,'); // clg
    console.error('h1 íƒœê·¸ê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.'); // cer
  }
  console.log('ë‹¤ìŒ ë¡œì§');
});

//? 2) ê³ ê¸‰ ì˜ˆì™¸ ì²˜ë¦¬: try-catch ë¸”ë¡ (+ finally)

/*
  try {
    ì˜ˆì™¸ ë°œìƒ ê°€ëŠ¥ì„ ë¡œì§
    ...
  } catch (e, exception, error){
    ì˜ˆì™¸ ë°œìƒ ì‹œ ë¡œì§
    ...
  } finally {
    ë¬´ì¡°ê±´ ì‹¤í–‰(ì„ íƒ)
  }

  ? try-catch ë¸”ë¡ (ë‘˜ ì¤‘ í•˜ë‚˜ë¥¼ ìƒëµí•  ìˆ˜ ì—†ìŒ)
  ? >> finally ë¸”ë¡ ìƒëµ ê°€ëŠ¥
*/

function randomException () {
  if (Math.random() < 0.5) {
    // 50%í™•ë£°ë¡œ ì¡°ê±´ë¬¸ ì‹¤í–‰
    throw new Error('ë¬´ì–¸ê°€ ì˜ëª»ë˜ì—ˆìŠµë‹ˆë‹¤.');
  }
  return 'ì„±ê³µì ìœ¼ë¡œ ì‹¤í–‰ë˜ì—ˆìŠµë‹ˆë‹¤.';
}

console.log('-----------------------');

try {
  const result = randomException();

  console.log(result);
  console.log('try êµ¬ë¬¸ì˜ ë§ˆì§€ë§‰ ì¤„');
} catch (e) {
  console.log('catch êµ¬ë¬¸');

  //! catch ë¸”ë¡ì˜ eê°ì²´
  // : Error ê°ì²´ì˜ ì¸ìŠ¤í„´ìŠ¤ì´ë©°
  //    , ì£¼ë¡œ e, err, error, exception ë“±ìœ¼ë¡œ ì“°ì„
  // - name ì†ì„±: ì—ëŸ¬ì˜ ì¢…ë¥˜ë¥¼ ë¬¸ìì—´ë¡œ ë°˜í™˜
  // - message: ì‚¬ëŒì´ ì½ì„ ìˆ˜ ìˆëŠ” í˜•íƒœì˜ ì—ëŸ¬ ë‚´ìš©ì´ ë‹´ê¹€
  // - stack: ì—ëŸ¬ê°€ ë°œìƒí•œ ì§€ì ì˜ í˜¸ì¶œ ìŠ¤íƒì„ ë¬¸ìì—´ë¡œ ë°˜í™˜
  console.log(e.message);

} finally {
  console.log('ì–¸ì œë‚˜ ì‹¤í–‰');
}

console.log('-----------------------');